fix(export): Resolve "No layers selected for export" delegation regression

CRITICAL FIX: Resolves export functionality broken by controller delegation.

Root Cause Analysis:
1. Controller delegation silently returned False when export combobox was empty
2. No fallback mechanism when controller delegation failed
3. Incorrect validation in get_layers_to_export() checked current_layer instead of widgets
4. ClickableLabel event handlers not working (events not accepted)
5. Missing diagnostic logs prevented troubleshooting

Solution Implemented:
================================================================================

1. DELEGATION FALLBACKS (filter_mate_dockwidget.py)
   - exporting_populate_combobox(): Added fallback to _populate_export_combobox_direct()
   - filtering_populate_layers_chekableCombobox(): Added fallback to _populate_filtering_layers_direct()
   - Both methods now try controller first, fall back to direct method if failed
   - Visual refresh forced after population

2. VALIDATION FIXES (filter_mate_dockwidget.py)
   - get_layers_to_export(): Changed from _is_layer_valid() to widgets_initialized check
   - get_layers_to_filter(): Same fix
   - RATIONALE: Export/filter layer lists don't depend on current_layer validity

3. CLICKABLE INDICATORS (filter_mate_dockwidget.py + widgets/)
   - NEW CLASS: ClickableLabel with proper event handling
   - _create_indicator_label(): Uses ClickableLabel instead of QLabel
   - _on_backend_indicator_clicked(): Added debug logs + error handling
   - _on_favorite_indicator_clicked(): Same improvements
   - backend_indicator.py: Added event.accept() in 3 locations
   - favorites_widget.py: Added event.accept() in mousePressEvent

4. CONTROLLER VALIDATION (ui/controllers/integration.py)
   - NEW METHOD: validate_controllers() - Returns validation dict
   - NEW METHOD: get_controller_status() - Human-readable status report
   - setup(): Enhanced with validation logging after setup
   - _cleanup_on_error(): Now cleans ALL controller references

5. DIAGNOSTIC LOGGING (filter_mate_dockwidget.py)
   - Emoji-prefixed logs for easy visual scanning (üîç, ‚úÖ, ‚ùå, ‚ö†Ô∏è)
   - Detailed traces in exporting_populate_combobox()
   - Detailed traces in filtering_populate_layers_chekableCombobox()
   - Widget count logging after population attempts

6. IMPORT IMPROVEMENTS (filter_mate_dockwidget.py)
   - Separated ImportError and Exception handling in controller imports
   - Added print() statements for immediate feedback on import failures
   - Detailed logging during _initialize_layer_state()

7. DELEGATION IMPROVEMENTS (filter_mate_app.py)
   - _try_delegate_to_controller(): Enhanced with detailed logging
   - Now syncs state before delegation
   - Better error messages with exc_info=True

8. GEOMETRY FIELD DETECTION (core/services/layer_filter_builder.py)
   - _detect_geometry_field(): Fixed to use QgsDataSourceUri instead of dataProvider()
   - Prevents potential crashes with certain layer types

================================================================================

Impact & Testing:
‚úÖ Export combobox now populated even if controller delegation fails
‚úÖ Filtering combobox has same fallback protection
‚úÖ Indicator clicks now properly trigger menus (ClickableLabel)
‚úÖ Validation no longer blocks export when current_layer is None
‚úÖ Comprehensive diagnostic logs for troubleshooting
‚úÖ Controller setup validated and logged

Files Changed:
- MOD: filter_mate_dockwidget.py (+246 lines, improved robustness)
  * NEW: ClickableLabel class (46 lines)
  * FIX: exporting_populate_combobox() with fallback (46 lines)
  * FIX: filtering_populate_layers_chekableCombobox() with fallback (47 lines)
  * FIX: get_layers_to_export() validation (1 line)
  * FIX: get_layers_to_filter() validation (1 line)
  * FIX: _on_backend_indicator_clicked() debug logs (14 lines)
  * FIX: _on_favorite_indicator_clicked() debug logs (11 lines)
  * FIX: _create_indicator_label() uses ClickableLabel (7 lines)
  * NEW: _populate_export_combobox_direct() diagnostic logs (13 lines)
  * NEW: _populate_filtering_layers_direct() diagnostic logs (13 lines)
  * FIX: _on_project_layers_ready() uses controller delegation (62 lines)
  
- MOD: ui/controllers/integration.py (+88 lines, validation system)
  * NEW: validate_controllers() - Full validation (49 lines)
  * NEW: get_controller_status() - Human-readable report (39 lines)
  * FIX: setup() - Enhanced logging (9 lines)
  * FIX: _cleanup_on_error() - Complete cleanup (9 lines)

- MOD: ui/widgets/backend_indicator.py (+3 lines)
  * FIX: mousePressEvent() - Added event.accept() calls (3 locations)

- MOD: ui/widgets/favorites_widget.py (+1 line)
  * FIX: mousePressEvent() - Added event.accept()

- MOD: filter_mate_app.py (+43 lines)
  * FIX: _try_delegate_to_controller() - Enhanced logging and error handling

- MOD: core/services/layer_filter_builder.py (+3 lines)
  * FIX: _detect_geometry_field() - Use QgsDataSourceUri for reliability

Testing Checklist:
‚ñ° Load QGIS with FilterMate plugin
‚ñ° Open Export tab
‚ñ° Verify layers appear in export combobox
‚ñ° Click backend indicator - verify menu appears
‚ñ° Click favorites indicator - verify menu appears
‚ñ° Attempt export - verify validation works
‚ñ° Check Python console for diagnostic logs

Known Limitations:
- Direct fallback methods don't handle PostgreSQL/remote layers (simplified logic)
- Full PostgreSQL/remote support requires controller delegation to succeed
- Fallbacks provide basic functionality only

Related Issues:
- Fixes "No layers selected for export" error
- Fixes indicator clicks not working
- Prevents silent delegation failures

Version: v4.0.10
Date: 2026-01-16
